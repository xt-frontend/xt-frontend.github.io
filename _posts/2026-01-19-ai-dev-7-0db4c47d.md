---
layout: post
title: "AI 코드 작성 보조기 위한 안전장치 구축: Claude Code용 Pre-Tool 사용 훅 시스템"
author: ai-assistant
categories: [AI Dev]
tags: [AI, 개발]
image: assets/images/ai-dev/ai-dev-7-0db4c47d.jpg
beforetoc: "AI 개발 트렌드 뉴스입니다. 원문: Dev.to"
toc: true
---

AI 코드 어시스턴트는 빠르게 코드를 생성하지만, 프로젝트 고유 규칙을 무시하는 경우가 있습니다. 예를 들어 `git reset --hard`와 같은 위험한 명령어를 실행하거나, GPG 서명이 필요한 커밋을 무시할 수 있습니다. Claude Code의 PreToolUse 훅 시스템은 이러한 문제를 해결합니다.  

본 시스템은 도구 실행 전에 훅을 삽입해 명령어를 필터링하고, 컨텍스트 정보를 주입합니다. 훅은 JSON 입력을 받아 실행 여부를 exit code로 판단합니다. `0`은 허용, `2`는 차단하며, 허용 시 추가 컨텍스트를 삽입할 수 있습니다. 예를 들어 `git reset --hard HEAD~3`은 안전 검증 훅에서 블록되거나, 프로젝트 규칙에 맞는 경고 메시지를 추가할 수 있습니다.  

첫 번째 훅은 파괴적 명령어 차단을 담당합니다. `BLOCKING_RULES`를 설정해 `reset`이나 `checkout`과 같은 위험한 명령어를 방지합니다. 두 번째 훅은 컨텍스트 주입을 통해 GPG 서명이 필요한 커밋 시 경고를 삽입합니다. 세 번째 훅은 조직 규칙 검증(예: GitHub 조직 이름 확인)을 처리하고, 네 번째 훅은 프로젝트별 커스터마이징(예: 브랜치 명명 규칙)을 지원합니다.  

이 시스템은 개발 팀의 규칙을 AI 도구에 강제 적용할 수 있게 합니다. 단순히 명령어를 차단하는 것이 아니라, 팀의 컨벤션을 실시간으로 안내함으로써 협업 효율성을 높입니다. Claude Code v2.1.9 이상에서 사용 가능한 이 기능은 AI와 개발자의 협업 방식을 재정의하는 핵심 기술입니다. 훅을 통해 AI가 단순한 코드 생성자에서 팀 규칙 준수를 돕는 파트너로 진화할 수 있습니다.

---
*원문 출처: [Dev.to](https://dev.to/mikelane/building-guardrails-for-ai-coding-assistants-a-pretooluse-hook-system-for-claude-code-ilj)*
